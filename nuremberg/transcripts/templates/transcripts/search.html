{% extends "transcripts/show.html" %}
{% load search_url %}

{% block title %} Search in Transcript - {{document.title}} {% endblock %}

{% block javascript_module %}{% endblock %}
{% block body_class %}transcript-search{% endblock %}
{% block document-nav %}{% endblock %}

{% block viewport %}
  <div class="search-results">
    {% for result in page_obj.object_list %}
      <div class="result-row">
        <a class="teaser" href="{% url 'transcripts:show' transcript_id=result.transcript_id slug=result.slug %}?seq={{ result.seq_number }}&amp;q={% encode_string query|default:'' %}">Page {{result.page_label|default:"Unlabeled"}} </a>
        <div class="occurrence-count">{{ result.highlighted.text|length }} occurences</div>
          <p>
            {% for snippet in result.highlighted.text|slice:":2" %}
            <span class="ellipsis">[ ... ]</span>
              {{ snippet|trim_snippet }}
            {% empty %}
              {{ result.text|slice:":150"|trim_snippet }}
            {% endfor %}
            <span class="ellipsis">[ ... ]</span>
          </p>
      </div>
    {% empty %}
      No results found.
    {% endfor %}
  </div>
  {% include 'search/pagination.html' %}
{% endblock %}
